export let h=(e,t={},...c)=>({e:e,p:t,c:c});export let x=(e,...t)=>{let c=[h()];let n=0;let s=(e,t,c,n)=>{if(!(e=e.substring(t)))return[e,n];let s=e.match(c);return[e.substring(s[0].length),s[1]]};return e.forEach((e,r)=>{for(;e;){let o;switch(e=e.trimLeft(),n){case 0:"<"===e[0]?"/"===e[1]?([e]=s(e,2,/^(\w+)/,t[r]),n=2):([e,o]=s(e,1,/^(\w+)/,t[r]),c.push(h(o,{})),n=1):([e,o]=s(e,0,/^([^<]+)/,""),c[c.length-1].c.push(o));break;case 1:if("/"===e[0]&&">"===e[1])c[c.length-2].c.push(c.pop()),n=0,e=e.substring(2);else if(">"===e[0])n=0,e=e.substring(1);else{[e,o]=s(e,0,/^([\w-]+)=/,"");let n=o;[e,o]=s(e,0,/^"([^"]*)"/,t[r]),c[c.length-1].p[n]=o}break;case 2:c[c.length-2].c.push(c.pop()),e=e.substring(1),n=0}}0===n&&(c[c.length-1].c=c[c.length-1].c.concat(t[r]))}),c[0].c[0]};let e,t,c=0;let n=t=>{let n=e[c++];return n||(n={value:t},e.push(n)),n};export let useReducer=(e,c)=>{let s=n(c),r=t;return[s.value,t=>{s.value=e(s.value,t),r()}]};export let useState=e=>useReducer((e,t)=>t,e);export let useEffect=(e,t=[])=>{let c=n();s(c.value,t)&&(c.value=t,c.cb=e)};let s=(e,t)=>!e||t.some((t,c)=>t!==e[c]);export let render=(n,s,r)=>{n=[].concat(n);let o,u={},l=s.h||{};for(s.h={},n.forEach((o,p)=>{for(t=()=>render(n,s);"function"==typeof o.e;){let n=o.p&&o.p.k||""+o.e+(u[o.e]=(u[o.e]||1)+1);e=l[n]||[],c=0,o=o.e(o.p,o.c,t),s.h[n]=e}let a=r||o.p&&o.p.xmlns;let h=s.childNodes[p];if(h&&(o.e?h.e===o.e:h.data===o)||(h=s.insertBefore((()=>o.e?a?document.createElementNS(a,o.e):document.createElement(o.e):document.createTextNode(o))(),h)),o.e){h.e=o.e;for(let e in o.p)h[e]!==o.p[e]&&(a?h.setAttribute(e,o.p[e]):h[e]=o.p[e]);render(o.c,h,a)}else h.data=o}),Object.values(s.h).map(e=>e.map(e=>e.cb&&(e.cleanup=e.cb(),e.cb=0))),Object.keys(l).filter(e=>!s.h[e]).map(e=>l[e].map(e=>e.cleanup&&e.cleanup()));o=s.childNodes[n.length];)render([],s.removeChild(o))};
